var Napchart=function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){function n(e,t){return e.x>t[0].x&&e.x<t[1].x&&e.y<t[0].y&&e.y>t[2].y}function a(e,t){return e.map(function(e){return{x:e.x+t.x,y:e.y+t.y}})}var r=[];e.exports={string:function(e,t,n,a){r.some(function(a){return a.text==e&&a.x==t&&a.y==n})||r.push({text:e,x:t,y:n,style:a||{},id:r.length})},writeAll:function(e){function t(e,t){var n=e.corners[1].x-t.corners[0].x,r=e.corners[1].y-t.corners[3].y;return n<r?(e.corners=a(e.corners,{x:-n/2,y:0}),e.x-=n/2,t.corners=a(t.corners,{x:n/2,y:0}),t.x+=n/2):(e.corners=a(e.corners,{x:0,y:-r/2}),e.y-=r/2,t.corners=a(t.corners,{x:0,y:r/2}),t.y+=r/2),{a:e,b:t}}var i=e.ctx,o=e.helpers,s=e.config;r.forEach(function(t){var n=t.style.size||s.fontSize;i.font=o.fontSize(e,n);var a=i.measureText(t.text).width,r=n;t.style.background&&(a+=s.content.textBoxPadWidth,r*=1.8),t.corners=[{x:t.x-a/2,y:t.y+r/2},{x:t.x+a/2,y:t.y+r/2},{x:t.x+a/2,y:t.y-r/2},{x:t.x-a/2,y:t.y-r/2}]}),r.forEach(function(e,a){r.filter(function(a,r){return e.corners.some(function(r){if(n(r,a.corners)){var i=t(e,a);return e=i.a,a=i.b,!0}return!1})})}),r.forEach(function(t){var n=t.style.size||s.fontSize;if(i.font=o.fontSize(e,n),t.style.background){i.save();var a=i.measureText(t.text).width+s.content.textBoxPadWidth,r=1.8*n;i.fillStyle=t.style.background,i.globalAlpha=.7,t.style.roundedCorners?o.fillRectRounded(e,t.corners[3].x,t.corners[3].y,a,r):i.fillRect(t.corners[3].x,t.corners[3].y,a,r),i.restore()}i.fillStyle=t.style.color||s.fontColor,i.fillText(t.text,t.x,t.y)}),r=[]}}},function(e,t){e.exports=function(e,t){function n(e){0===Object.keys(c).length?c={up:e.y,down:e.y,left:e.x,right:e.x}:(e.y<c.up&&(c.up=e.y),e.y>c.down&&(c.down=e.y),e.x<c.left&&(c.left=e.x),e.x>c.right&&(c.right=e.x))}var t=Object.assign({},t),a=0;t.elements.forEach(function(e){"arc"===e.type&&(a+=e.radians)}),a==2*Math.PI?e.shapeIsContinous=!0:e.shapeIsContinous=!1,t.elements.forEach(function(e,n){e.startAngle=0===n?0:t.elements[n-1].endAngle,"arc"===e.type?e.endAngle=e.startAngle+e.radians:"line"===e.type&&(e.endAngle=e.startAngle)});var r=e.w;r-=120,t.elements.forEach(function(t,n){"arc"===t.type&&(r-=e.config.edgeRadius*(t.radians/Math.PI))}),r<0&&(r=0);var i=0;t.elements.forEach(function(t,n){"arc"===t.type?t.length=t.radians*e.config.baseRadius:"line"===t.type&&(t.length=r*(t.percent/100)),t.length=Math.round(t.length),i+=t.length});var o=0;t.elements.forEach(function(e,n){e.minutes=Math.floor(e.length/i*1440),o+=e.minutes,n==t.elements.length-1&&o<1440&&(o-=e.minutes,e.minutes=1440-o,o+=e.minutes)}),1440!=o&&console.warn("bad things might happen"),t.elements=t.elements.filter(function(e){return e.minutes>0}),t.elements.forEach(function(n,a){0===a?n.start=t.shift:a>0&&(n.start=t.elements[a-1].end),n.end=e.helpers.limit(n.start+n.minutes)});var s={x:e.w/2,y:e.h/2};t.elements.forEach(function(e,n){0===n?(e.startPoint=s,e.endPoint=s):"arc"===e.type?(e.startPoint=t.elements[n-1].endPoint,e.endPoint=t.elements[n-1].endPoint):"line"===e.type&&(e.startPoint=t.elements[n-1].endPoint),"line"===e.type&&(e.endPoint={x:e.startPoint.x+Math.cos(e.startAngle)*e.length,y:e.startPoint.y+Math.sin(e.startAngle)*e.length})});var c={};t.elements.forEach(function(e,t){n(e.startPoint),n(e.endPoint)}),c.down=e.h-c.down,c.right=e.w-c.right;var l=(c.left-c.right)/2,u=(c.up-c.down)/2;u-=t.shiftDown*e.ratio,t.elements.forEach(function(e,t){e.startPoint={x:e.startPoint.x-l,y:e.startPoint.y-u},e.endPoint={x:e.endPoint.x-l,y:e.endPoint.y-u}}),t.lanes=[];var d=e.data.lanes;console.log(d),void 0!==d&&0!=d||console.error("chart.data.lanes is undefined, not an array OR HAS 0 ELEMENTS:",e.data.lanes);for(var f=t.maxLaneSize*e.ratio,h=t.laneMaxRadius*e.ratio,m=t.laneMinRadius*e.ratio,p=h-m,v=Math.min(f,p/d),g=p-v*d+m,y=0;y<d;y++)t.lanes.push({start:g+v*y,end:g+v*(y+1)});return t}},function(e,t,n){var a={};n(3)(a),n(4)(a),n(5)(a),n(6)(a),n(7)(a),n(8)(a),n(11)(a),n(25)(a),n(28)(a),e.exports=a},function(e,t,n){"use strict";e.exports=function(e){var t=e.helpers={};t.duration=function(e,n){return t.limit(n-e)},t.range=function(e,n,a){return a?t.limit(e-n):t.limit(n-e)},t.minutesToHoursMinutes=function(e){var t=Math.floor(e/60)+"",n=e%60+"";return n=Math.floor(n),{hours:t,minutes:n}},t.minutesToReadable=function(e,n){var a;return void 0===n&&(n=60),e>n?(a=t.minutesToHoursMinutes(e),a.hours+"h "+a.minutes+"m"):e+"m"},t.middlePoint=function(e,n){var a=t.duration(e,n);return t.limit(e+a/2)},t.getProgressBetweenTwoValues=function(e,n,a){var r=t.duration(n,e)/t.duration(n,a);return isNaN(r)?1:r},t.getPositionBetweenTwoValues=t.getProgressBetweenTwoValues,t.limit=function(e){return 1440==e?1440:e-1440*Math.floor(e/1440)},t.shortestWay=function(e){return e>720?e-1440:e<-720?e+1440:e},t.minutesDistance=function(e,n){return Math.min(t.duration(e,n),t.duration(n,e))},t.isInside=function(e,t,n){if(n>t){if(e<n&&e>t)return!0}else if(t>n&&(e>t||e<n))return!0;return e==t||e==n},t.isInsideAngle=function(e,n,a){function r(e){return e%=2*Math.PI,e<0&&(e+=2*Math.PI),e}return t.isInside(r(e),r(n),r(a))},t.distance=function(e,t,n){var t=n.y-t,e=n.x-e;return Math.sqrt(t*t+e*e)},t.angleBetweenTwoPoints=function(e,n,a){var r=t.distance(e,n,a),n=(a.y-n)/r,e=(a.x-e)/r,i=Math.atan(n/e);return e>=0&&(i+=Math.PI),i+=Math.PI/2},t.minutesToClock=function(e,t){t=Math.floor(t);var n=Math.floor(t/60)+"";return t=t%60+"",1==n.length&&(n="0"+n),1==t.length&&(t="0"+t),e.config.ampm?0==t&&n%12==0?n>12||0==n?"midnight":"noon":(1*n+11)%12+1+":"+t+(n<12?" am":" pm"):n+":"+t},t.distanceFromPointToLineSegment=function(e,t,n,a){var r=n.x,i=n.y,o=a.x,s=a.y,c=e-r,l=t-i,u=o-r,d=s-i,f=c*u+l*d,h=u*u+d*d,m=-1;0!=h&&(m=f/h);var p,v;m<0?(p=r,v=i):m>1?(p=o,v=s):(p=r+m*u,v=i+m*d);var g=e-p,y=t-v;return Math.sqrt(g*g+y*y)},t.distanceFromPointToLine=function(e,t){return t-e},t.each=function(e,n,a,r){var i,o;if(t.isArray(e))if(o=e.length,r)for(i=o-1;i>=0;i--)n.call(a,e[i],i);else for(i=0;i<o;i++)n.call(a,e[i],i);else if("object"==typeof e){var s=Object.keys(e);for(o=s.length,i=0;i<o;i++)n.call(a,e[s[i]],s[i])}},t.deepEach=function(e,n){function a(e,n){if(t.isArray(e))for(var a=0;a<e.length;a++)n(e,e[a],a);else if("object"==typeof e)for(var r=Object.keys(e),a=0;a<r.length;a++)n(e,e[r[a]],r[a])}function r(e,i,o){t.isArray(i)||"object"==typeof i?a(i,r):n(e,i,o)}a(e,r)},t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.extend=function(e){for(var n=arguments,a=function(t,n){e[n]=t},r=1,i=arguments.length;r<i;r++)t.each(n[r],a);return e},t.uid=function(){var e=0;return function(){return e++}}();var n=t.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(1-Math.pow(2,-10*e/1))},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),-a*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),a*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,a=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.3*1.5*1),a<Math.abs(1)?(a=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/a),e<1?a*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*-.5:a*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-n.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e*1:e<2/2.75?1*(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return e<.5?.5*n.easeInBounce(2*e):.5*n.easeOutBounce(2*e-1)+.5}};t.isArray=Array.isArray?function(e){return Array.isArray(e)}:function(e){return"[object Array]"===Object.prototype.toString.call(e)}}},function(e,t){e.exports=function(e){var t=e.helpers;t.strokeSegment=function(e,n,a,r){var i=e.ctx;i.save(),i.strokeStyle=r.color,i.lineWidth=e.config.bars.general.stroke.lineWidth,i.lineJoin="mittel",t.createSegment(e,r.outerRadius,r.innerRadius,n,a),i.stroke(),i.restore()},t.colorMap=function(e,t){return t.includes("#")?t:e.config.colorMap[t]},t.fillRectRounded=function(e,t,n,a,r){var i=e.config.cornerRadius,o=e.ctx;o.save(),o.strokeStyle=o.fillStyle,o.lineJoin="round",o.lineWidth=i,o.strokeRect(t+i/2,n+i/2,a-i,r-i),o.restore()},t.circle=function(e,t,n){var a=e.ctx;a.beginPath(),a.arc(t.x,t.y,n,0,2*Math.PI),a.closePath()},t.fillCircle=function(e,t,n){var a=e.ctx;this.circle(e,t,n),a.fill()},t.fontSize=function(e,t){return(t*=e.config.baseFontSize.split(":")[1])+"px "+e.config.font}}},function(e,t){e.exports=function(e){var t=e.helpers;t.XYtoInfo=function(e,n,a){var r,i,o=e.shape,s=o.elements.find(function(e){if("arc"===e.type){var r=t.angleBetweenTwoPoints(n,a,e.startPoint);if(r>=e.startAngle&&r<=e.endAngle)return!0}else if("line"===e.type){var i=t.angleBetweenTwoPoints(n,a,e.startPoint),o=t.angleBetweenTwoPoints(n,a,e.endPoint);if(t.isInsideAngle(i,e.startAngle,e.startAngle+Math.PI/2)&&t.isInsideAngle(o,e.startAngle-Math.PI/2,e.startAngle))return!0}return!1});void 0===s&&(s=o.elements.reduce(function(e,r){if("line"===r.type){var i=t.distanceFromPointToLineSegment(n,a,r.startPoint,r.endPoint);if(i<e.distance)return Object.assign({},r,{distance:i})}return e},{distance:1440,initial:!0}));var c;if("arc"===s.type){var l=t.angleBetweenTwoPoints(n,a,s.startPoint);c=t.getProgressBetweenTwoValues(l,s.startAngle,s.endAngle)}else if("line"===s.type){var u=t.distanceFromPointToLineSegment(n,a,s.startPoint,s.endPoint),d=t.distance(n,a,s.startPoint),f=Math.sqrt(d*d-u*u);c=f/s.length,isNaN(c)&&(c=0)}var r=t.duration(s.start,s.end)*c+s.start;if(r=Math.min(r,1440),"arc"===s.type?i=t.distance(n,a,s.startPoint):"line"===s.type&&(i="line"==e.data.shape?t.distanceFromPointToLine(a,s.startPoint.y):t.distanceFromPointToLineSegment(n,a,s.startPoint,s.endPoint)),isNaN(r)||isNaN(i))throw new"ouch";var h=e.shape.lanes,m=h.findIndex(function(e){return i>e.start&&i<e.end});return{minutes:r,distance:i,lane:m}},t.minutesToXY=function(e,n,a){var r=(e.ctx,e.shape),n=t.limit(n),i=r.elements.find(function(e){return t.isInside(n,e.start,e.end)});if(void 0===i)throw console.warn(Object.assign({},e.shape),n,a),new"shapeElement==undefined";var o=t.getProgressBetweenTwoValues(n,i.start,i.end);if("line"===i.type)var s={x:i.startPoint.x+Math.cos(i.startAngle)*o*i.length,y:i.startPoint.y+Math.sin(i.startAngle)*o*i.length},c={x:s.x+Math.cos(i.startAngle-Math.PI/2)*a,y:s.y+Math.sin(i.startAngle-Math.PI/2)*a};else if("arc"===i.type)var l=i.startPoint,u=o*i.radians,c={x:l.x+Math.cos(i.startAngle+u-Math.PI/2)*a,y:l.y+Math.sin(i.startAngle+u-Math.PI/2)*a};return c},t.createCurve=function(e,n,a,r,i,o){function s(n,a){var o=t.clone(e.shape);i&&o.elements.reverse(),n=t.limit(n),a=t.limit(a);var s,l;o.elements.forEach(function(e,r){t.isInside(n,e.start,e.end)&&(s=r),t.isInside(a,e.start,e.end)&&(l=r)});var u,d=[],f=!1;if(u=i?{start:1,end:0}:{start:0,end:1},void 0===s||void 0===l)throw console.log(o,n,a),"error: something is not right here";for(var h=s;h<o.elements.length;h++){var m={shapeElement:o.elements[h],start:u.start,end:u.end};if(h==s&&(m.start=t.getPositionBetweenTwoValues(n,o.elements[h].start,o.elements[h].end)),h==l&&(m.end=t.getPositionBetweenTwoValues(a,o.elements[h].start,o.elements[h].end)),(h==s&&h==l&&m.end>m.start&&i||m.end<m.start&&!i)&&(0==d.length?(m.end=u.end,f=!0):m.start=u.start),d.push(m),h==l){if(!f)break;f=!1}h==o.elements.length-1&&(h=-1)}d.forEach(function(n,a){var o=n.shapeElement;if("arc"===o.type){var s=o.startAngle-Math.PI/2,l=s+n.start*o.radians,u=s+n.end*o.radians;c.arc(o.startPoint.x,o.startPoint.y,r,l,u,i)}else if("line"===o.type){var d=t.minutesToXY(e,o.start+o.minutes*n.start,r),f=t.minutesToXY(e,o.start+o.minutes*n.end,r);c.lineTo(d.x,d.y),c.lineTo(f.x,f.y)}})}var c=e.ctx;if(void 0===i)var i=!1;void 0===o?s(n,a):!e.shapeIsContinous&&n>a?(s(n,1440),o(),e.ctx.beginPath(),s(0,a),o()):(s(n,a),o())},t.createSegment=function(e,n,a,r,i,o){function s(r,i){var o=e.ctx;o.beginPath(),t.createCurve(e,r,i,n),t.createCurve(e,i,r,a,!0),o.closePath()}void 0===o?s(r,i):!e.shapeIsContinous&&r>i?(s(r,1440),o(),s(0,i),o()):(s(r,i),o())}}},function(e,t){e.exports=function(e){e.config={interaction:!0,penMode:!0,baseRadius:32,edgeRadius:42,background:"transparent",font:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',ampm:!1,fontSize:{small:1.75,medium:2.25,big:3.5},baseFontSize:"noscale:1",fontColor:"#aaaaaa",cornerRadius:3,text:!0,drawFace:!0,paddingLanes:.4,face:{stroke:.15,weakStrokeColor:"#dddddd",weakerStrokeColor:"#f5f5f5",strokeColor:"#aaaaaa",importantStrokeColor:"black",importantLineWidth:.3,numbers:{distance:6,color:"#262626"}},content:{handleTimes:{distance:2.5,color:"#999999"},handles:.6,bigHandles:1.4,textDistance:3,textBoxPadWidth:.9},handlesClickDistance:3,defaultColor:"red",colorMap:{red:"#D02516",blue:"#4285F4",brown:"#B15911",green:"#34A853",gray:"#949494",yellow:"#FBBC05",purple:"#730B73",pink:"#ff94d4",white:"#ffffff"},colorTagsSize:2}}},function(e,t){e.exports=function(e){function t(e){var t=e.canvas;a(e),e.width=e.w=t.width,e.height=e.h=t.height,e.ratio=Math.min(e.w/90,e.h/90),e.config=o(e.unScaledConfig,e.ratio)}function n(t){t.needFullRedraw?(e.draw.fullDraw(t),t.needFullRedraw=!1,t.onUpdate()):e.draw.drawFrame(t)}function a(e){if("undefined"!=typeof window){var t=e.canvas,n=window.devicePixelRatio,a=t.parentNode,r=a.offsetWidth,i=a.offsetHeight;t.width=n*r,t.height=n*i,t.style.width="100%",t.style.height="100%"}}function r(t){return t=t||{},t=s.extend(JSON.parse(JSON.stringify(e.config)),t)}function i(e,t){function n(){return Math.round(1e4*Math.random())}return e.map(function(e){if(void 0===e.start||void 0===e.end)throw new Err("Start and End properties are required!");var e={start:e.start,end:e.end,id:e.id||n(),lane:e.lane||0,text:e.text||"",color:e.color||t.config.defaultColor};return e.lane>t.shape.lanes.length-1&&console.log("Lane no. "+e.lane+" does not exist in this chart.\n        Number of lanes: "+t.shape.lanes.length),e})}function o(e,t){function n(e,n,a){(n>1||n<1||1===n)&&(e[a]=n*t)}var a=s.clone(e);return s.deepEach(a,n),a}var s=e.helpers;e.init=function(a,o,c){var l={setHover:function(e,t){this.hoverElement={id:e,type:t},n(this)},isHover:function(e,t){return this.hoverElement.id==e&&this.hoverElement.type==t},isActive:function(e,t){return this.activeElement.elementId==e&&this.activeElement.type==t},setActive:function(e){this.activeElement=e},removeActive:function(){this.activeElement={},n(this)},removeHover:function(){this.hoverElement={},n(this)},setSelected:function(e){this.selectedElement=e,this.onUpdate(),this.onSetSelected(e),n(this)},isSelected:function(e){return this.selectedElement==e},deselect:function(){this.selectedElement=!1,this.onUpdate(),this.onSetSelected(!1),n(this)},isPen:function(){return l.config.penMode&&0==Object.keys(this.hoverElement).length&&0==Object.keys(this.activeElement).length&&this.mousePenLocation},setShape:function(e){},animateShape:function(e){},initAndAddElements:function(e){e=i(e,l),this.data.elements=this.data.elements.concat(e),this.draw()},setElements:function(e){var t=this.helpers;e=e.map(function(e){return Object.assign({},e,{start:t.limit(e.start),end:t.limit(e.end)})}),this.data.elements=e,this.draw()},updateElement:function(e){this.data.elements=this.data.elements.map(function(t){return t.id==e.id?Object.assign(t,e):t}),n(this)},updateManyElements:function(e,t){this.data.elements=this.data.elements.map(function(n){return t.indexOf(n.id)>-1?Object.assign({},n,{start:s.limit(n.start+e.start),end:s.limit(n.end+e.end)}):n}),n(this)},deleteElement:function(e){this.data.elements=this.data.elements.filter(function(t){return t.id!=e}),this.isSelected(e)&&this.deselect(),this.history.add("Delete element"),n(this)},emptyLane:function(e){this.data.elements=this.data.elements.filter(function(t){return t.lane!=e})},deleteLane:function(t){var a=this;if(1==this.data.lanes)return void console.error("Cant delete last lane");this.emptyLane(t),this.data.elements=this.data.elements.map(function(e){return e.lane<t?e:Object.assign({},e,{lane:e.lane-1})}),delete this.data.lanesConfig[t],Object.keys(this.data.lanesConfig).forEach(function(e){if(!(e<t))return e==t?console.error("WHAT?? this key should have been deleted"):void(e>t&&(a.data.lanesConfig[t-1]=Object.assign({},a.data.lanesConfig[t]),delete a.data.lanesConfig[t]))}),this.data.lanes-=1,l.history.add("Delete lane"),l.needFullRedraw=!0,e.shape.initShape(l),n(this)},addLane:function(t){this.data.lanes+=1,l.history.add("Add lane"),l.needFullRedraw=!0,e.shape.initShape(l),n(this)},toggleLockLane:function(e){var t=this.getLaneConfig(e);this.data.lanesConfig[e]={locked:!t.locked},console.log(this.data.lanesConfig[e]),l.needFullRedraw=!0,n(this)},getLaneConfig:function(e){var t={locked:!1};return Object.assign({},t,this.data.lanesConfig[e])},createElement:function(e){var t=i([e],this)[0];return l.data.elements.push(t),n(this),t},changeColor:function(e,t){this.data.elements=this.data.elements.map(function(n){return n.id==e?Object.assign({},n,{color:t}):n}),l.history.add("Change color"),n(this)},colorTag:function(e,t){if(""==t)return this.data.colorTags=this.data.colorTags.filter(function(t){return t.color!=e});void 0===this.data.colorTags.find(function(t){return t.color==e})&&this.data.colorTags.push({color:e}),this.data.colorTags=this.data.colorTags.map(function(n){return n.color==e?Object.assign({},n,{tag:t}):n}),n(this)},draw:function(){n(l)},benchmark:function(){e.draw.benchmark(this)},onSetSelected:function(){},onUpdate:function(){},update:function(e){l.data=e,n(l),console.log("updating")},updateDimensions:function(){t(l),l.needFullRedraw=!0,e.shape.initShape(l),n(this)},changeShape:function(t){e.shape.changeShape(l,t),this.data.shape=t}},u={elements:[],colorTags:[],shape:"circle",lanes:1,lanesConfig:{1:{locked:!1}}};return l.ctx=a,l.canvas=a.canvas,l.unScaledConfig=r(c),t(l),l.data=s.extend(u,o),l.hoverElement={},l.activeElement={},l.selectedElement=!1,l.mousePenLocation=!1,l.needFullRedraw=!0,l.isTouchUser=!1,l.helpers=e.helpers,l.styles=e.styles,e.shape.initShape(l),e.interactCanvas.init(l),e.history.init(l),l.history.add("Initial"),l.data.elements=i(l.data.elements,l),n(l),l}}},function(e,t,n){var a=function(e){for(var t in e){var n=e[t];e[t]=Object.assign({},n,{laneMaxRadius:n.laneMaxRadius||36,laneMinRadius:n.laneMinRadius||16,maxLaneSize:n.maxLaneSize||14,shiftDown:n.shiftDown||0,shift:n.shift||0,centerMinutes:n.centerMinutes||0})}return e}(n(9)),r=n(1),i=n(10);e.exports=function(e){function t(e,t){"string"==typeof t&&(o=t,t=a[t]),e.shape=r(e,t)}function n(e,t){function n(){var t=s.clone(a[r]),l=s.clone(a[o[c]]),u={count:o.length};i(e,t,l,u,function(){r=o[c],++c<o.length&&n()})}var r=e.data.shape,o=[t];"circle"==r?"line"==t&&(o=["transitionShape","line"]):"wide"==r?"line"==t&&(o=["circle","transitionShape","line"]):"line"==r&&("wide"==t?o=["transitionShape","circle","wide"]:"circle"==t&&(o=["transitionShape","circle"]));var c=0;n()}var o,s=e.helpers;e.shape={initShape:function(e){t(e,e.data.shape)},changeShape:function(e,t){n(e,t)}}}},function(e,t){e.exports={miniCircle:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:0},{type:"arc",radians:Math.PI},{type:"line",percent:0}],laneMinRadius:16},circle:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:0},{type:"arc",radians:Math.PI},{type:"line",percent:0}]},line:{elements:[{type:"line",percent:100}],laneMaxRadius:60,laneMinRadius:0,maxLaneSize:20,shiftDown:30,centerMinutes:720},wide:{elements:[{type:"arc",radians:Math.PI},{type:"line",percent:100},{type:"arc",radians:Math.PI},{type:"line",percent:100}],shift:0,centerMinutes:1350},transitionShape:{elements:[{type:"arc",radians:Math.PI/6}]}}},function(e,t,n){var a=n(1);e.exports=function(e,t,n,r,i){function o(){var t=Date.now(),r=Math.min(1,(t-d)/u);r=s(r),n.elements.forEach(function(e,t){var n=e.animation.end-e.animation.start;e[e.animation.property]=e.animation.start+n*r}),n.propAnimations.forEach(function(e){n[e.prop]=e.start+e.duration*r}),e.shape=a(e,n),e.needFullRedraw=!0,e.draw(),r<1?window.requestAnimationFrame(o):i()}function s(e){return c.easingEffects.easeInOutQuad(e)}var c=e.helpers;n.elements.forEach(function(e){if("line"==e.type)var n="percent";else var n="radians";var a=t.elements.find(function(n,a){if(e.type===n.type)return t.elements.splice(a,1)});void 0===a&&(a={type:e.type},a[n]=0),e.animation={start:a[n],end:e[n],property:n}}),t.elements.forEach(function(e){if("line"==e.type)var t="percent";else var t="radians";n.elements.push({type:e.type,animation:{start:e[t],end:0,property:t}})});var l=["shift","shiftDown","laneMinRadius","laneMaxRadius","maxLaneSize","centerMinutes"];n.propAnimations=l.map(function(e){return{prop:e,start:t[e],end:n[e],duration:n[e]-t[e]}});var u=350,d=Date.now();o()}},function(e,t,n){e.exports=function(e){function t(e){var t=e.ctx;if(t.font=e.config.fontSize+"px "+e.config.font,t.textAlign="center",t.textBaseline="middle",o(e),"undefined"==typeof document)c.forEach(function(t){t(e,e.ctx)}),s.forEach(function(t){t(e,e.ctx)});else{e.ocanvas=document.createElement("canvas"),e.ocanvas.width=e.width,e.ocanvas.height=e.height;var n=e.ocanvas.getContext("2d"),r=Object.assign({},e,{ctx:n});c.forEach(function(e){e(r,n)}),a(e)}}function a(t){o(t),s.forEach(function(n){n(t,e)})}function r(t){var n=Date.now();for(task in s){for(var a=Date.now(),r=0;r<1e3;r++)s[task](t,e);var i=Date.now();console.log(task+" x 1000 "+(i-a)+" ms")}var o=Date.now();console.log("Total: "+(o-n)+" ms"),console.log("One round: "+(o-n)/1e3+" ms")}var i=n(0);e.draw={fullDraw:t,drawFrame:a,benchmark:r};var o=n(12),s=[function(e){void 0!==e.ocanvas&&e.ctx.drawImage(e.ocanvas,0,0)},n(13),n(14),n(15),n(16),n(17),n(18),n(19),i.writeAll,n(20)],c=[n(21),n(22),n(23),n(24)]}},function(e,t){e.exports=function(e){e.ctx.clearRect(0,0,e.w,e.h)}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;e.data.elements.forEach(function(r){var i=e.shape.lanes[r.lane];t.save(),t.fillStyle=n.colorMap(e,r.color),e.isActive(r.id,"middle")&&(t.globalAlpha=.9),n.createSegment(e,i.end-a.paddingLanes,i.start+a.paddingLanes,r.start,r.end,function(){t.fill()}),t.restore()})}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config,r=e.data,i=r.elements.find(function(t){return t.id==e.selectedElement});if(void 0!==i){var o=e.shape.lanes[i.lane];t.save();["start","end"].forEach(function(r){var s=n.minutesToXY(e,i[r],o.end-a.paddingLanes);t.globalAlpha=.5,t.fillStyle=n.colorMap(e,i.color),n.circle(e,s,a.content.handles),t.fill(),(e.isHover(i.id,r)||e.isActive(i.id,r))&&(t.globalAlpha=.2,t.fillStyle=n.colorMap(e,i.color),n.circle(e,s,a.handlesClickDistance),t.fill())}),t.restore()}}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,r=e.config;r.text&&e.data.elements.forEach(function(i){var o=e.shape.lanes[i.lane];t.save(),["start","end"].forEach(function(s){var c=r.content.handleTimes,l=o.end+c.distance;if(0==i.lane)var l=o.start-c.distance;t.fillStyle=c.color;var u=n.minutesToXY(e,i[s],l);a.string(n.minutesToClock(e,i[s]),u.x,u.y,{size:r.fontSize.small,color:r.content.handleTimes.color})}),t.restore()})}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers;e.config.text&&e.data.elements.forEach(function(r){if(0!=r.text.length){var i=e.shape.lanes[r.lane];t.save();var o=n.middlePoint(r.start,r.end);n.duration(r.start,r.end)<90&&(o=Math.max(o,r.start+40));var s=i.end+e.config.content.textDistance;if(0==r.lane)var s=i.start-e.config.content.textDistance;var c=n.minutesToXY(e,o,s);a.string(r.text,c.x,c.y,{size:e.config.fontSize.small,color:"white",background:n.colorMap(e,r.color)}),t.restore()}})}},function(e,t,n){var a=n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,r=e.config;r.text&&e.data.elements.forEach(function(i){var o=e.shape.lanes[i.lane];t.save();var s=n.middlePoint(i.start,i.end),c=(o.start+o.end)/2,l=n.minutesToXY(e,s,c),u=n.minutesToReadable(n.duration(i.start,i.end));a.string(u,l.x,l.y,{size:r.fontSize.medium,color:"white",background:n.colorMap(e,i.color),roundedCorners:!0}),t.restore()})}},function(e,t){e.exports=function(e){function t(t,i){var o=e.shape.lanes[t[0].lane];n.save(),t=t.sort(function(e,t){return e.start-t.start}),n.fillStyle=r.face.strokeColor,n.strokeStyle=r.face.weakStrokeColor,i&&(n.strokeStyle=r.face.strokeColor,n.lineWidth=r.face.importantLineWidth);var s=[];t.forEach(function(e,n){if(n==t.length-1)var a=t[0];else var a=t[n+1];s.push({start:e.end,end:a.start})});var c=o.start+(o.end-o.start)/3,l=o.start+2*(o.end-o.start)/3;s.forEach(function(t){var i=a.duration(t.start,t.end),o=a.minutesToReadable(i,120);if(i>=60){var s=a.limit(t.start+15),u=a.limit(t.end-15),d=a.limit(s+i/2);n.beginPath(),a.createCurve(e,s,u,c,!1,function(){n.stroke()}),n.font=a.fontSize(e,r.fontSize.small);var f=a.minutesToXY(e,d-10,l);n.fillText(o,f.x,f.y)}}),n.restore()}var n=e.ctx,a=e.helpers,r=e.config;e.shape.lanes.forEach(function(n,a){var r=e.data.elements.filter(function(e){return e.lane==a});e.getLaneConfig(a).locked&&r.length>0?t(r,!0):r.forEach(function(n){e.isSelected(n.id)&&t(r,!1)})})}},function(e,t){e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;if(e.isPen()){var r=e.mousePenLocation.minutes,i=e.shape.lanes[e.mousePenLocation.lane];t.save(),t.fillStyle=e.config.defaultColor,t.globalAlpha=.5;var o=n.limit(r-1),s=n.limit(r+1);n.createSegment(e,i.end-a.paddingLanes,i.start+a.paddingLanes,o,s,function(){t.fill()}),t.restore()}}},function(e,t,n){n(0);e.exports=function(e){var t=e.ctx,n=e.helpers,a=e.config;t.save(),t.fillStyle="black";var r=n.minutesToXY(e,e.shape.centerMinutes,e.shape.lanes[0].start-e.shape.laneMinRadius/2*e.ratio);e.data.colorTags.forEach(function(i){r.y+=1.5*a.colorTagsSize;var o=e.data.elements.reduce(function(e,t){return t.color==i.color?e+n.duration(t.start,t.end):e},0),s=i.tag+": "+n.minutesToReadable(o);t.font=n.fontSize(e,a.fontSize.medium),t.fillText(s,r.x,r.y);var c=a.fontSize.medium,l=t.measureText(s).width,u={x:r.x-l/2-c-a.fontSize.medium/2,y:r.y-a.fontSize.medium/2};t.save(),t.fillStyle=n.colorMap(e,i.color),t.fillRect(u.x,u.y,c,c),t.restore()}),t.restore()}},function(e,t){e.exports=function(e,t){"transparent"!=e.config.background&&(t.save(),t.fillStyle=e.config.background,t.fillRect(0,0,e.w,e.h),t.restore())}},function(e,t){e.exports=function(e,t){var n=e.shape.lanes,a=e.helpers;if(e.config.drawFace){t.lineWidth=e.config.face.stroke,t.strokeStyle=e.config.face.strokeColor,t.save(),t.strokeStyle=e.config.face.weakerStrokeColor;for(var r=0;r<n.length-1;r++)t.beginPath(),a.createCurve(e,.01,1439.9,n[r].end),t.stroke(),t.setLineDash([]);t.restore(),t.beginPath(),a.createCurve(e,.01,1439.9,n[0].start),t.stroke(),t.beginPath(),a.createCurve(e,.01,1439.9,n[n.length-1].end),t.stroke()}}},function(e,t){e.exports=function(e,t){var n=e.helpers,a=e.config,r=e.shape.lanes;if(a.drawFace){t.lineWidth=a.face.stroke,t.save(),t.strokeStyle=a.face.weakStrokeColor,t.setLineDash([2,4]),t.beginPath();for(var i=0;i<=24;i++)if(24!=i||!e.shapeIsContinous){var o=n.minutesToXY(e,60*i,r[0].start),s=n.minutesToXY(e,60*i,r[r.length-1].end);t.moveTo(o.x,o.y),t.lineTo(s.x,s.y)}t.stroke(),t.setLineDash([]),t.restore()}}},function(e,t){e.exports=function(e,t){var n=e.helpers,a=e.config;if(a.drawFace){t.save(),t.font=n.fontSize(e,a.fontSize.big),t.fillStyle=a.face.numbers.color,t.textAlign="center",t.textBaseline="middle";for(var r=e.shape.lanes[e.shape.lanes.length-1],i=0;i<=24;i+=4){if(24==i&&e.shapeIsContinous)return;var o=n.minutesToXY(e,60*i,r.end+a.face.numbers.distance),s=i;a.ampm&&(0==s?s="midnight":s<12?s+=" am":12==s?s="noon":s>12&&(s=s-12+" pm")),t.fillText(s,o.x,o.y)}t.restore()}}},function(e,t,n){var a=n(26),r=n(27);e.exports=function(e){function t(e,t){y=f(e);var n=a(t,h(y,t));if(e.stopPropagation(),e.preventDefault(),0==Object.keys(n).length)return c(e,t),t.isPen()&&i(e,t),void v(t);t.setActive(n),p(t,n.elementId),l(t)}function n(e){v(e)}function i(e,t){c(e,t),t.listeningForPenMove=!0}function o(e,t){var n=t.helpers;y=f(e);var r=h(y,t);if(t.listeningForPenMove){var i=t.mousePenLocation.minutes,o=n.XYtoInfo(t,r.x,r.y),s=o.minutes,d=n.duration(i,s);if(!(d>10&&d<1430))return;var p=d>720?"start":"end",v="end"==p?"start":"end",g={lane:t.mousePenLocation.lane};if(g[v]=i,g[p]=m(s),u(t,g.start,g.end,g.lane))return;var x=t.createElement(g);t.setActive({elementId:x.id,type:p}),t.setSelected(x.id),t.listeningForPenMove=!1}var w=a(t,r);0==Object.keys(w).length?(c(e,t),t.removeHover()):t.setHover(w.elementId,w.type),l(t)}function s(e,t){if(Object.keys(t.activeElement).length>0){var n=t.activeElement.elementId,a=t.data.elements.find(function(e){return e.id==n});0==g.duration(a.start,a.end)?t.deleteElement(n):t.history.add("Move element")}x&&(p(t,x),x=!1),t.removeActive(),t.listeningForPenMove=!1,t.onUpdate()}function c(e,t){y=f(e);var n=h(y,t),a=t.helpers,r=a.XYtoInfo(t,n.x,n.y);-1==r.lane?t.mousePenLocation=!1:t.mousePenLocation={minutes:m(r.minutes),lane:r.lane}}function l(e){var t=e.activeElement;if(Object.keys(t).length>0){var n=h(y,e),a=g.XYtoInfo(e,n.x,n.y);!function(t,n){var a=e.data.elements.find(function(e){return e.id==t.elementId}),r={id:a.id};if("start"==t.type||"end"==t.type){var i=m(Math.round(n.minutes));if("start"==t.type)var o=i,s=a.end;else var o=a.start,s=i;var c=d(e,o,s,a.lane,a.id,t.type);c&&(i="start"==t.type?g.duration(i,c.end)>720?s:c.end:g.duration(c.start,i)>720?o:c.start),a[t.type]!=i&&(r[t.type]=i),Object.keys(r).length>1&&e.updateElement(r)}else{var l=e.getLaneConfig(a.lane).locked;if(!l){var f=n.distance,h=e.shape.lanes,p=h.reduce(function(e,t,n){var a=Math.abs(f-(t.start+t.end)/2);return a<e.distanceToLane?{laneIndex:n,distanceToLane:a}:e},{distanceToLane:1/0});p.distanceToLane===1/0&&console.error("Could not find a lane to place element in");var v=p.laneIndex;if(v!=a.lane){var c=u(e,a.start,a.end,v,a.id);c||(r.lane=v)}}a.duration=g.duration(a.start,a.end);var y=t.positionInElement;void 0===y&&(y=a.duration/2);var o=m(g.limit(Math.round(n.minutes-y))),s=g.limit(o+a.duration),c=u(e,o,s,a.lane,a.id);if(c){var x=e.data.elements.filter(function(e){return e.lane==c.lane&&e.id!=a.id}).sort(function(e,t){return e.start-t.start}),w=g.limit(n.minutes-y+a.duration/2),P=x.map(function(e,t){return t==x.length-1?{start:e.end,end:x[0].start}:{start:e.end,end:x[t+1].start}}).map(function(e){return e.space=g.duration(e.start,e.end),e}).filter(function(e){return e.space>=a.duration}),M=P.reduce(function(e,t){var n=g.minutesDistance(t.start,w),a=g.minutesDistance(t.end,w);if(n<a)var r="start",i=n;else var r="end",i=a;return i<e.distance?Object.assign({},t,{distance:i,startOrEnd:r}):e},{distance:1440});"start"==M.startOrEnd?(o=M.start,s=o+g.duration(a.start,a.end)):(s=M.end,o=s-g.duration(a.start,a.end))}if(a.start==o&&a.end==s||(r.start=g.limit(o),r.end=g.limit(s)),1===Object.keys(r).length)return;if(l){var S={start:r.start-a.start,end:r.end-a.end},E=e.data.elements.filter(function(e){return e.lane==a.lane}).map(function(e){return e.id});e.updateManyElements(S,E)}else Object.keys(r).length>1&&e.updateElement(r)}}(t,a)}}function u(e,t,n,a,r){var i=e.data.elements.find(function(e){return r!=e.id&&((g.isInside(e.start+1,t,n)||g.isInside(e.end-1,t,n)||g.isInside(t,e.start+1,e.end-1))&&e.lane===a)});return void 0!==i&&i}function d(e,t,n,a,r,i){var o="end"==i?"start":"end";if(e.data.elements.some(function(e){return r!=e.id&&((g.isInside(e.start+1,t,n)||g.isInside(e.end-1,t,n)||g.isInside(t,e.start+1,e.end-1))&&e.lane===a)})){var s={start:t,end:n};return e.data.elements.reduce(function(e,t){if(r==t.id)return e;var n="start"==i,a=g.range(s[o],t[o],n);return a<e.distance?Object.assign({},t,{distance:a}):e},{distance:1440})}return!1}function f(e){return void 0!==e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function h(e,t){var n=t.canvas.getBoundingClientRect(),a="undefined"!=typeof window?window.devicePixelRatio:1;return{x:(e.x-n.left)*a,y:(e.y-n.top)*a}}function m(e){return 5*Math.round(e/5)}function p(e,t){e.setSelected(t)}function v(e,t){void 0===t&&e.deselect(),e.deselect(t)}var g=e.helpers;e.interactCanvas={init:function(e){function a(e,t,n){t.split(" ").forEach(function(t){e.addEventListener(t,n)})}e.config.interaction&&(window.addEventListener("touchstart",function t(){e.isTouchUser=!0,window.removeEventListener("touchstart",t,!0)},!0),a(document,"mousemove touchmove",function(t){e.data.activeElement&&(t.stopPropagation(),t.preventDefault()),o(t,e)}),a(e.canvas,"mousedown touchstart",function(n){t(n,e)}),a(window,"mousedown touchstart",function(t){t.target!=e.canvas&&(t.target.classList.contains("napchartDontLoseFocus")?x=e.selectedElement:n(e))}),a(window,"mouseup touchend",function(t){s(t,e)}),r.init(e))}};var y,x}},function(e,t){e.exports=function(e,t){var n,a=(e.canvas,e.data),r=e.helpers,i={};if(a.elements.forEach(function(a){var o=e.shape.lanes[a.lane];e.isSelected(a.id)&&["start","end"].forEach(function(s){var c=r.minutesToXY(e,a[s],o.end);(n=r.distance(c.x,c.y,t))<e.config.handlesClickDistance&&(void 0===i.distance||n<i.distance)&&(i={elementId:a.id,type:s,distance:n})})}),0==Object.keys(i).length){var o=r.XYtoInfo(e,t.x,t.y);if(!o)return{};a.elements.forEach(function(t){var n=e.shape.lanes[t.lane];if(r.isInside(o.minutes,t.start,t.end)){var a=n.start,s=n.end;o.distance>a&&o.distance<s&&(i={elementId:t.id,type:"middle",positionInElement:o.minutes-t.start})}})}return i}},function(e,t){e.exports={init:function(e){function t(t){var a=e.data.elements.find(function(e){return e.id==t});r.value=a.text,r.focus(),n(r,a),r.oninput=function(t){var n=t.target.value;e.updateElement({id:e.selectedElement,text:n})}}function n(t,n){var a=e.helpers,r=e.shape.lanes[n.lane],i=a.middlePoint(n.start,n.end);a.duration(n.start,n.end)<90&&(i=Math.max(i,n.start+40));var o=r.end+e.config.content.textDistance;if(0==n.lane)var o=r.start-e.config.content.textDistance;a.minutesToXY(e,i,o);t.value=n.text}var a=e.canvas.parentElement,r=document.createElement("input");r.style.position="absolute",r.className="hiddenInput",r.style.opacity=0,r.style.width="100px",r.style.pointerEvents="none",r.style.zIndex=0,r.style.top="0",r.style.left="0",r.type="text",a.appendChild(r),e.forceFocusSelected=function(){t(e.selectedElement)},e.onSetSelected=function(n){if(!n)return r.value="",r.blur(),"get out of here";e.isTouchUser||t(n)},document.onkeydown=function(t){t=t||window.event,(46==t.keyCode||8==t.keyCode&&t.metaKey)&&e.selectedElement&&r===document.activeElement&&e.deleteElement(e.selectedElement)}}}},function(e,t){e.exports=function(e){function t(t,n){var a=JSON.parse(JSON.stringify(n));t.data=Object.assign({},t.data,a),t.needFullRedraw=!0,e.shape.initShape(t),t.draw()}e.helpers;e.history={init:function(e){e.history={add:function(t){var n=e.history,a=JSON.parse(JSON.stringify({elements:e.data.elements,lanes:e.data.lanes}));if(n.array[n.currentPointer]&&JSON.stringify(n.array[n.currentPointer].snapshot)===JSON.stringify(a))return void console.log("no change");n.currentPointer<n.array.length-1&&(n.array=n.array.slice(0,n.currentPointer+1)),n.array.push({action:t,snapshot:a}),n.currentPointer=n.array.length-1},forward:function(n){var a=e.history;a.canIGoForward()&&(a.currentPointer+=1,t(e,a.array[a.currentPointer].snapshot))},back:function(n){var a=e.history;a.canIGoBack()&&(a.currentPointer-=1,t(e,a.array[a.currentPointer].snapshot))},canIGoForward:function(t){var n=e.history;return n.currentPointer<n.array.length-1?n.array[n.currentPointer+1].action:null},canIGoBack:function(t){var n=e.history;return n.currentPointer>0?n.array[n.currentPointer].action:null},array:[],currentPointer:-1}}}}}]);